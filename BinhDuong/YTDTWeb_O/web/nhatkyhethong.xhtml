<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:s="http://jboss.com/products/seam/taglib"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:a4j="http://richfaces.org/a4j"
                template="/layout/mytemplate.xhtml">

<ui:define name="body">
	<h:form id="__form" name="_form">
		<div style="width:778px; position:absolute; z-index:99">
		<ui:include src="/layout/mymenu_YTDT_QuanTriHeThong.xhtml" /></div>
	    <table style="margin-top:20px" cellspacing="0" cellpadding="0" border="0" width="777">
    		<tr>
				<td style="padding-top: 5px" colspan="3" height="50px">
					<table cellspacing="0" cellpadding="0" border="0" width="100%">
						<tr>
							<td height="50px" width="55%"
								style="padding-left: 18px; font-family: Arial; font-size: 18px; color: white; font-weight: bold;">
							<h:graphicImage value="/images/white_light.gif" width="43"
								height="16" /> NHẬT KÝ HỆ THỐNG</td>
							<td valign="top">
								<table cellspacing="0" cellpadding="0" width="100%" >
		    						<tr>
		    							<td style="font-family: Arial; font-size: 12px; color: white; text-align: right; padding-right: 15px; padding-bottom: 2px; height: 25px; border-bottom: solid 1px #97989a;" valign="bottom" >
		    								&#160;
		    							</td>
		    						</tr>
		    					</table> 
							</td>
						</tr>
					</table>
				</td>
			</tr>
			 	<tr>
    		<td width="13px" height="12px" class="mytdl">    			
    		</td>
    		<td style="background-color: #c9daea;" width="965px" height="12px" >       			   			 		 		 		 	
    		</td>
    		<td width="11px" height="12px" class="mytdr">    			
    		</td>
    	</tr>
    	<tr style=" height : 5px;">
    		<td width="100%" style="background-color: #c9daea; padding-top: 0px; padding-bottom: 0px" colspan="3" align="center">  
    		    <a4j:outputPanel id="__message">
					<h:messages styleClass="mynull" />
				</a4j:outputPanel>
    		</td>    		
    	</tr>
			<tr>
					<td colspan="3"
						style="background-color: #c9daea; padding-top: 10px; padding-bottom: 15px"
						width="100%" align="center"><!-- Main Area -->
					<table cellspacing="0" cellpadding="0" border="0" width="99%">
						<tr style="height: 25px;">
							<td align="right" style="padding-right: 0px;" width="38%"><h:outputText
								value="Màn hình chức năng " styleClass="mytext"
								style="margin-right: 5px;" /></td>
							<td align="left" style="padding-right: 35px;"><h:selectOneMenu
								value="#{nhatkyHethong.loaiBaoCao}"
								id="DM_LOAI_BAO_CAO" 
								width="120px;float:left;">
																<f:selectItem itemValue="ALL" itemLabel="Tất cả"/>
																<f:selectItem itemValue="B110_Dangkykhambenh" itemLabel="Ngoại trú - Đăng ký khám bệnh"/>
																<f:selectItem itemValue="B131_Dangkykhambenhcapcuu" itemLabel="Ngoại trú - Đăng ký khám bệnh cấp cứu"/>
																<f:selectItem itemValue="B121_Thamkhamvaxutri" itemLabel="Ngoại trú - Thăm khám và Xử trí"/>
																<f:selectItem itemValue="B121_2_Canlamsangphauthuat" itemLabel="Ngoại trú - Cận lâm sàng, PT-TT"/>
																<f:selectItem itemValue="B121_3_Xutrithuoctaibankham" itemLabel="Ngoại trú - Xử trí thuốc"/>
																
																<f:selectItem itemValue="CLS_Noi_Tru" itemLabel="Nội trú - Cận lâm sàng, PT-TT"/>
																<f:selectItem itemValue="THUOC_Noi_Tru" itemLabel="Nội trú - Thuốc, y dụng cụ"/>
                                                                <f:selectItem itemValue="B3114_Benhnhanchuyenkhoa" itemLabel="Bệnh nhân chuyển khoa"/>
                                                                <f:selectItem itemValue="B3112_Benhnhantrathuoc" itemLabel="Bệnh nhân trả thuốc"/>
                                                                <f:selectItem itemValue="B3115_Xacnhanthongtindieutri" itemLabel="Xác nhận thông tin điều trị, cho ra viện"/>
                                                                
                                                                <f:selectItem itemValue="B212_Capnhatthongtinnhapvien" itemLabel="HSBA - Cập nhật thông tin nhập viện"/>
                                                                <f:selectItem itemValue="B211_Capnhathosobenhan" itemLabel="HSBA - Cập nhật HSBA (Xuất khoa hoặc xuất viện)"/>
                                                                <f:selectItem itemValue="B216_Capnhatthongtinhanhchanhbenhnhan" itemLabel="HSBA - Điều chỉnh thông tin hành chính bệnh nhân"/>
                                                                <f:selectItem itemValue="B215_Luutrubenhan" itemLabel="HSBA - Lưu trữ bệnh án"/>
                                                                <f:selectItem itemValue="B214_Xoathongtinbenhan" itemLabel="HSBA - Xóa thông tin bệnh án"/>
                                                                
                                                                <f:selectItem itemValue="B3125_Lapphieudutru" itemLabel="Lập phiếu dự trù lĩnh thuốc"/>
                                                                <f:selectItem itemValue="B3125_2_Lapphieudutrutra" itemLabel="Lập phiếu dự trù trả thuốc"/>
                                                                <f:selectItem itemValue="B3142_Phieulanhthuoctutruc" itemLabel="Lập phiếu lĩnh thuốc tủ trực"/>
                                                                <f:selectItem itemValue="B3143_Phieutrathuoctutruc" itemLabel="Lập phiếu trả thuốc tủ trực"/>
                                                                <f:selectItem itemValue="B4163_Phieudutrulanhthuoc" itemLabel="Lập phiếu lĩnh thuốc từ kho chính"/>
                                                                <f:selectItem itemValue="B4111_phieunhapkhochinh" itemLabel="Nhập thuốc từ nhà cung cấp"/>
                                                                
                                                                <f:selectItem itemValue="B4444_Phieutrahangbhytchokhochinh" itemLabel="Trả kho chính"/>
                                                                <f:selectItem itemValue="B4165_Phieutrahangtutruc" itemLabel="Tủ trực các khoa phòng trả hàng"/>
                                                                <f:selectItem itemValue="B4113_Phieutrahangkhoa" itemLabel="Trả hàng từ phiếu dự trù"/>
                                                                <f:selectItem itemValue="B4162_Kholetrahang" itemLabel="Kho Lẻ trả hàng"/>
                                                                <f:selectItem itemValue="B4123_Phieuxuathangkhoaphong" itemLabel="Xuất thanh lý / Xuất các đơn vị tuyến dưới"/>
                                                                
                                                                <f:selectItem itemValue="B4167_TuyenDuoiTraHang" itemLabel="Đơn vị tuyến dưới trả hàng"/>
                                                                <f:selectItem itemValue="Tranhacungcap" itemLabel="Trả nhà cung cấp"/>
                                                                
                                                                <f:selectItem itemValue="B4311_Xuathangchobenhnhan" itemLabel="Xuất thuốc BHYT Ngoại trú"/>
                                                                <f:selectItem itemValue="B4166_Xuathangchobenhnhan" itemLabel="Xuất thuốc BHYT Nội trú"/>
                                                                <f:selectItem itemValue="B4121_Phieuxuathangkhole" itemLabel="Xuất đến kho lẻ"/>
                                                                <f:selectItem itemValue="B4164_Phieuxuathangtutruc" itemLabel="Xuất đến tủ trực các khoa phòng"/>
                                                                <f:selectItem itemValue="B4122_Xuathangtheophieudt" itemLabel="Xuất thuốc theo phiếu dự trù"/>
                                                                
                                                                <f:selectItem itemValue="B3232_ThanhToanBenhNhanBHYT" itemLabel="Viện phí - Thanh toán bệnh nhân BHYT"/>
                                                                <f:selectItem itemValue="B3235_Thanhtoanphongcapcuu" itemLabel="Viện phí - Thanh toán phòng cấp cứu"/>
                                                                <f:selectItem itemValue="B3241_Thanhtoanravien" itemLabel="Viện phí - Thanh toán ra viện"/>
                                                                
							</h:selectOneMenu> <h:outputText value="*" styleClass="mynull"
								style="margin-right: 5px; margin-left: 3px;" /></td>
						</tr>
						
						<tr style="height: 25px;">
							<td align="right" style="padding-right: 0px;" width="38%"><h:outputText
								value="Người thực hiện " styleClass="mytext"
								style="margin-right: 5px;" /></td>
							<td align="left" style="padding-right: 35px;"><h:selectOneMenu
								value="#{nhatkyHethong.user}"
								id="_lstUser" 
								width="120px;float:left;" style=" width : 178px;">
								<f:selectItem itemLabel="Tất cả" itemValue="ALL"/>
								<f:selectItem itemLabel="ADMIN - Quản trị hệ thống" itemValue="ADMIN"/>
								<f:selectItems  value = "#{nhatkyHethong.listUser}"/>
								</h:selectOneMenu>
							</td>
						</tr>
						
						

						<tr style="height: 25px;">
							<td align="right"><h:outputText value="Thời gian từ ngày"
								styleClass="mytext" style="margin-right: 5px;" /></td>
							<td align="left"><h:inputText
								onkeypress="return being_wellformed_Date(this, event)"
								onblur='if(this.className.match(/focus/gi))    this.className = this.className.replace(/focus/gi,""); return is_wellformed_Date(this) '
								type="text" id="__tungay" name="_tungay"
								value="#{nhatkyHethong.tuNgay}" maxlength="10"
								style="width:70px;" /><a hideFocus="true"
								href="java_script:void(0)"
								onclick="if(self.gfPop)gfPop.fPopCalendar(document.getElementById(prefix_component + '__tungay')); document.getElementById(prefix_component + '__denngay').focus(); return false;"><h:graphicImage
								style="margin:0 0 -3px 0" value="/resources/calendar/cal.gif"
								border="0" name="popcal" /></a>  <h:outputText value="Đến ngày"
								styleClass="mytext" style="margin-left:18px;margin-right:5px;" />
							<h:inputText
								onkeypress="return being_wellformed_Date(this, event)"
								onblur='if(this.className.match(/focus/gi))    this.className = this.className.replace(/focus/gi,""); return is_wellformed_Date(this)'
								type="text" id="__denngay" name="_denngay"
								value="#{nhatkyHethong.denNgay}" maxlength="10"
								styleClass="myinput" style="width:70px;" /><a hideFocus="true"
								href="java_script:void(0)"
								onclick="if(self.gfPop)gfPop.fPopCalendar(document.getElementById(prefix_component + '__denngay')); document.getElementById(prefix_component + '_object').focus(); return false;"><h:graphicImage
								style="margin:0 0 -3px 0" value="/resources/calendar/cal.gif"
								border="0" name="popcal" /></a></td>
						</tr>
						
						<tr>
							<td align="right">
								<h:outputLabel value="Mã số / Mã phiếu truy xuất " />
							</td>
							<td align="left">
								<h:inputText id="_object" value="#{nhatkyHethong.object}" style="width : 250px;"/>							
							</td>
						</tr>
						
						<tr>
							<td align="right">
								<h:outputLabel value="Nội dung" />
							</td>
							<td align="left">
								<h:inputText id="_logString" value="#{nhatkyHethong.logString}" style=" width : 250px;"/>							
							</td>
						</tr>
					
						<tr>
							<td align="right">
								<h:outputLabel value="Thuốc / CLS cần tìm " />
							</td>
							<td align="left">
								<h:inputText id="_logData" value="#{nhatkyHethong.logData}" style=" width : 250px;"/>							
							</td>
						</tr>
					
						
						<tr style="height: 40px;">
							<td align="center" style="padding-left: 285px;" colspan="2">
							<div style="float: left;"><a4j:commandButton
								reRender="__myTable,__message" 
								id="__tienhanh" name="_tienhanh"
								action="#{nhatkyHethong.thuchienAction}"
								value="Tiến hành" style="width: 70px;margin-left:3px;"
								styleClass="mybton_b" /></div>
							<div style="float: left;"><a4j:commandButton
								
								reRender="__tungay,__denngay,DM_LOAI_BAO_CAO,_object,_logString,_logData,__myTable,__message"
								id="__chonlai" name="_chonlai"
								action="#{nhatkyHethong.resetForm}" value="Nhập mới"
								style="width: 70px;margin-left:3px;" styleClass="mybton_b" /></div>
							</td>
						</tr>
					</table>
					</td>
				</tr>
				<tr>
					<td colspan="3"  style="padding-top:10px;background-color: #c9daea" >
						<table border="0" cellspacing="0" cellpadding="0" style="width:100%; height: 50%" align="center" >
							<tr>
								<td colspan="8" style="border:solid 1px #7e9dba; width : 100%;" >
									<div style="overflow-x: hidden; overflow-y: scroll; height: 300px;width: 100%">	
										<rich:dataTable headerClass="mycol" id="__myTable" var="row" value="#{listLogs}"
											cellpadding="0" cellspacing="1" rowClasses="myrow1,myrow2"
											border="0" style="width: 100%;" styleClass="myTable">
											<rich:column style="width:6%;"  >
												<f:facet name="header"><h:outputText value="Nhân viên"/></f:facet> 
												<h:outputText value="#{row.userId}"  />														
											</rich:column>
											<rich:column style="width:6%;"  >
												<f:facet name="header"><h:outputText value="Mã số"/></f:facet> 
												<h:outputText value="#{row.objectId}"  />														
											</rich:column>
											<rich:column style="width:6%;"  >
												<f:facet name="header"><h:outputText value="Ngày giờ thực hiện"/></f:facet> 
												<h:outputText value="#{row.dateTime}">
													<f:convertDateTime pattern="HH:mm dd/MM/yyyy" timeZone="Asia/Ho_Chi_Minh"/>
												</h:outputText>														
											</rich:column>
											<rich:column style="width:30%;"  >
												<f:facet name="header"><h:outputText value="Ghi chú"/></f:facet> 
												<h:outputText value="#{row.logString}"  />														
											</rich:column>
											<rich:column style="width:40%;"  >
												<f:facet name="header"><h:outputText value="Danh sách Thuốc/CLS"/></f:facet> 
												<h:outputText value="#{row.listData}"  />														
											</rich:column>
										</rich:dataTable>
									</div>
								</td>
							</tr>
						</table>
					</td>
				</tr>
  		</table>
 	</h:form>	
 	<iframe width="174" height="189" name="gToday:normal:agenda.js" id="gToday:normal:agenda.js" src="#{facesContext.externalContext.requestContextPath}/resources/calendar/ipopeng.htm" scrolling="no" frameborder="0" style="visibility:visible; z-index:999; position:absolute; top:-500px; left:-500px;"/>
 </ui:define>    
</ui:composition>

